extends base

total_posts = get_posts(limit=300, sort='desc')
if request.args.use == 'tags' 
	entries = group(total_posts, 'tags')
elif request.args.use == 'categories'
	entries = group(total_posts, 'parent_path')
elif request.args.use == 'xxx'
	entries = group(total_posts, 'category')
else
	entries = group(total_posts, 'date:year', reverse=True)

block content
	for year, posts in entries
		.post_group
			.group_name= year
			ul
				for post in posts
					li.post_item
						span.date(style='margin-right=10px;')
							[{{post.date | date("%Y-%m-%d") }}]
						span.title(style='margin-right=10px;')
							a(href="{{ post.url }}")= post.title
						for tag in post.tags
							span.tag_item
								a(href="/tags/{{tag}}")= tag
						span.visit_count
							访问量：{{ post.visits or 0 }}

block side_content
	include include/tag_cloud_count
	
